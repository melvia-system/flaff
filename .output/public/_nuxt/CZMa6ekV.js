import{_ as c}from"./DY850VXx.js";import{D as m,r as o,K as u,o as d,a2 as p,w as _,b as s,ar as g,at as v,x as w}from"./BqDm20Qw.js";import"./mxjl1Hgx.js";const y={class:"flex-1 flex justify-center items-center"},b={class:"flex-1 flex justify-center items-center"},L=m({__name:"Image",props:{flaffId:{type:String,required:!0},item:{type:Object,required:!0},flaff:{type:Object,required:!0}},emits:["flaffUpdated"],setup(l,{emit:h}){const e=l,t=o(null),r=o(!0),n=async()=>{r.value=!0;try{if(console.log("fetching image preview",t.value),!t.value)return;const f=await $fetch(`/api/flaff/${e.flaffId}/file/${e.item.uuid}`,{responseType:"blob"}),i=URL.createObjectURL(f);t.value.src=i}catch(a){console.error("error",a)}r.value=!1};return u(()=>{n()}),(a,f)=>{const i=c;return d(),p(i,{"isLoading:isLoading":"",item:e.item,"flaff-id":e.flaffId,"is-mime-readable":!0,mimeType:"image/*",flaff:l.flaff,onFlaffUpdated:f[0]||(f[0]=()=>a.$emit("flaffUpdated"))},{default:_(()=>[s("div",y,[g(s("div",b,[s("img",{ref_key:"imagePreview",ref:t,class:"max-w-full max-h-full",alt:"Image Preview"},null,512)],512),[[v,!w(r)]])])]),_:1},8,["item","flaff-id","flaff"])}}});export{L as default};
