import{_ as m}from"./DULxEgAi.js";import{D as u,r as o,K as d,o as p,a2 as _,w as g,b as s,as as v,au as w,x as y}from"./C-7uryom.js";import"./DOwFC9TG.js";const b={class:"flex-1 flex justify-center items-center"},h={class:"flex-1 flex justify-center items-center"},U=u({__name:"Image",props:{flaffId:{type:String,required:!0},item:{type:Object,required:!0},flaff:{type:Object,required:!0}},emits:["flaffUpdated"],setup(l,{emit:x}){const e=l,t=o(null),r=o(!0),n=async()=>{r.value=!0;try{if(console.log("fetching image preview",t.value),!t.value)return;const f=await $fetch(`/api/flaff/${e.flaffId}/file/${e.item.uuid}`,{responseType:"blob"}),i=URL.createObjectURL(f);t.value.src=i}catch(a){console.error("error",a)}r.value=!1};return d(()=>{n()}),(a,f)=>{const i=m;return p(),_(i,{"isLoading:isLoading":"",item:e.item,"flaff-id":e.flaffId,"is-mime-readable":!0,mimeType:"image/*",flaff:l.flaff,onFlaffUpdated:f[0]||(f[0]=(...c)=>a.$emit("flaffUpdated",...c))},{default:g(()=>[s("div",b,[v(s("div",h,[s("img",{ref_key:"imagePreview",ref:t,class:"max-w-full max-h-full",alt:"Image Preview"},null,512)],512),[[w,!y(r)]])])]),_:1},8,["item","flaff-id","flaff"])}}});export{U as default};
